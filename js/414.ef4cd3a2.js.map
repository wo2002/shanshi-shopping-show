{"version":3,"file":"js/414.ef4cd3a2.js","mappings":"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","sources":["webpack://hm-shopping/./src/views/comment/index.vue","webpack://hm-shopping/src/views/comment/index.vue","webpack://hm-shopping/./src/views/comment/index.vue?14c4","webpack://hm-shopping/./src/views/comment/index.vue?2f6e","webpack://hm-shopping/./src/api/comment.js","webpack://hm-shopping/./src/api/product.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"comment\"},[_c('div',{staticClass:\"header\"},[_c('van-nav-bar',{attrs:{\"title\":\"商品评价页\",\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.$router.go(-1)}}})],1),_c('div',{staticClass:\"middle\"},[_c('div',{staticClass:\"nav\"},[_c('ul',_vm._l((_vm.choose),function(item,index){return _c('li',{key:index},[_c('a',{class:{ active: _vm.activeId === index },on:{\"click\":function($event){return _vm.commentData(index)}}},[_vm._v(_vm._s(item))])])}),0)]),_vm._l((_vm.list),function(item){return _c('div',{key:item.comment_id,staticClass:\"comment-item\"},[_c('div',{staticClass:\"top\"},[_c('img',{attrs:{\"src\":item.user.avatar_url || _vm.defaultImg,\"alt\":\"\"}}),_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(item.user.nick_name))]),_c('van-rate',{attrs:{\"size\":16,\"value\":item.score / 10,\"color\":\"#ffd21e\",\"void-icon\":\"star\",\"void-color\":\"#eee\"}})],1),_c('div',{staticClass:\"content\"},[_vm._v(\" \"+_vm._s(item.content)+\" \")]),_c('div',{staticClass:\"time\"},[_vm._v(\" \"+_vm._s(item.create_time)+\" \")])])})],2)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"comment\">\r\n    <div class=\"header\">\r\n      <van-nav-bar\r\n        title=\"商品评价页\"\r\n        left-text=\"返回\"\r\n        left-arrow\r\n        @click-left=\"$router.go(-1)\"\r\n      />\r\n    </div>\r\n    <div class=\"middle\">\r\n      <div class=\"nav\">\r\n        <ul>\r\n          <li v-for=\"(item, index) in choose\" :key=\"index\">\r\n            <a\r\n              :class=\"{ active: activeId === index }\"\r\n              @click=\"commentData(index)\"\r\n              >{{ item }}</a>\r\n          </li>\r\n          <!-- <li><a :value=\"10\">好评(10)</a></li>\r\n          <li><a>中评(10)</a></li>\r\n          <li><a>差评(10)</a></li> -->\r\n        </ul>\r\n      </div>\r\n      <div class=\"comment-item\" v-for=\"item in list\" :key=\"item.comment_id\">\r\n        <div class=\"top\">\r\n          <img :src=\"item.user.avatar_url || defaultImg\" alt=\"\" />\r\n          <div class=\"name\">{{ item.user.nick_name }}</div>\r\n          <van-rate\r\n            :size=\"16\"\r\n            :value=\"item.score / 10\"\r\n            color=\"#ffd21e\"\r\n            void-icon=\"star\"\r\n            void-color=\"#eee\"\r\n          />\r\n        </div>\r\n        <div class=\"content\">\r\n          {{ item.content }}\r\n        </div>\r\n        <!-- <img :src=\"item.images.image_url\" alt=\"\" /> -->\r\n        <!-- <img :src=\"item.images.file.external_url\" alt=\"\" /> -->\r\n        <div class=\"time\">\r\n          {{ item.create_time }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getCommentList } from '@/api/comment'\r\nimport { getProDetail } from '@/api/product'\r\n// 导入默认图片\r\nimport defaultImg from '@/assets/default-avatar.png'\r\nexport default {\r\n  name: 'CommentList',\r\n  data () {\r\n    return {\r\n      total: '',\r\n      activeId: 0,\r\n      type: -1,\r\n      list: [],\r\n      detail: {},\r\n      defaultImg,\r\n      choose: ['全部', '好评', '中评', '差评']\r\n    }\r\n  },\r\n  computed: {\r\n    goodsId () {\r\n      // 动态路由携带id,用params来获取地址栏id信息\r\n      return this.$route.params.id\r\n    }\r\n  },\r\n  async created () {\r\n    const {\r\n      data: { detail }\r\n    } = await getProDetail(this.goodsId)\r\n    console.log(detail)\r\n    // this.images = detail.goods_images\r\n    this.detail = detail\r\n\r\n    this.getCommentList()\r\n  },\r\n\r\n  methods: {\r\n    // 获取评价列表\r\n    async getCommentList () {\r\n      const {\r\n        data: {\r\n          list: { data }\r\n        }\r\n      } = await getCommentList({\r\n        scoreType: this.type,\r\n        goodsId: this.detail.goods_id,\r\n        page: 1\r\n      })\r\n      console.log(data)\r\n      this.list = data\r\n      //   console.log(this.list[0].images[0].image_url)\r\n    },\r\n    commentData (index) {\r\n      console.log(index)\r\n      this.activeId = index\r\n      if (index === 0) {\r\n        this.type = -1\r\n        this.getCommentList()\r\n        this.total = this.list.length\r\n      }\r\n      if (index === 1) {\r\n        this.type = 30\r\n        this.getCommentList()\r\n      }\r\n      if (index === 2) {\r\n        this.type = 20\r\n        this.getCommentList()\r\n      }\r\n      if (index === 3) {\r\n        this.type = 10\r\n        this.getCommentList()\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.comment {\r\n  .header {\r\n    ::v-deep {\r\n      .van-nav-bar__text {\r\n        color: #333;\r\n      }\r\n    }\r\n  }\r\n  .middle {\r\n    padding: 20px;\r\n    .nav {\r\n      ul {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        li {\r\n          a {\r\n            padding-bottom: 5px;\r\n            color: #333;\r\n          }\r\n          a.active {\r\n            color: #e01222;\r\n            border-bottom: 3px solid #e01222;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .comment-item {\r\n      font-size: 16px;\r\n      line-height: 30px;\r\n      .top {\r\n        height: 30px;\r\n        display: flex;\r\n        align-items: center;\r\n        margin-top: 20px;\r\n        img {\r\n          width: 20px;\r\n          height: 20px;\r\n        }\r\n        .name {\r\n          margin: 0 10px;\r\n        }\r\n      }\r\n      .time {\r\n        color: #999;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=6c306e80&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=6c306e80&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6c306e80\",\n  null\n  \n)\n\nexport default component.exports","import request from '@/utils/request'\r\n\r\n// 请求评论数据\r\nexport const getCommentData = (goodsId, limit) => {\r\n  return request.get('/comment/listRows', {\r\n    params: {\r\n      goodsId,\r\n      limit\r\n    }\r\n  })\r\n}\r\n\r\n// 获取评论列表\r\nexport const getCommentList = (obj) => {\r\n  const { scoreType, goodsId, page } = obj\r\n  return request.get('/comment/list', {\r\n    params: {\r\n      scoreType,\r\n      goodsId,\r\n      page\r\n    }\r\n  })\r\n}\r\n","import request from '@/utils/request'\r\n\r\n// 获取商品列表\r\nexport const getGoodsList = (obj) => {\r\n  const { categoryId, goodsName, page } = obj\r\n  return request.get('/goods/list', {\r\n    params:\r\n    {\r\n      categoryId,\r\n      goodsName,\r\n      page\r\n    }\r\n  })\r\n}\r\n\r\n// 商品详情页\r\nexport const getProDetail = (goodsId) => {\r\n  return request.get('/goods/detail', {\r\n    params: {\r\n      goodsId\r\n    }\r\n  })\r\n}\r\n"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","$event","$router","go","_l","choose","item","index","key","class","active","activeId","commentData","_v","_s","list","comment_id","user","avatar_url","defaultImg","nick_name","score","content","create_time","staticRenderFns","name","data","total","type","detail","computed","goodsId","$route","params","id","created","getProDetail","console","log","getCommentList","methods","scoreType","goods_id","page","length","component","getCommentData","limit","request","get","obj","getGoodsList","categoryId","goodsName"],"sourceRoot":""}